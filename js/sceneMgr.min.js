"use strict";class sceneMgr{constructor(){this._sceneCollection=[],this._curScene={},this._transID=3,this._stageSel=""}ready(e){document.addEventListener("DOMContentLoaded",()=>{this.init(),e()},!1)}setStage(e){this._stageSel=e}init(){for(let e of this._sceneCollection)e&&(e.ele=document.querySelector(e.eleSel),e.ele.style.position="absolute",gsap.set(e.ele,{autoAlpha:0,zIndex:1}));let e=document.querySelector(this._stageSel);this._h=e.offsetWidth,this._w=e.offsetWidth}addScene(e,t,s,n){this._sceneCollection[t]={id:t,name:s,eleSel:e,evt:n}}start(e){for(let e of this._sceneCollection)e&&gsap.set(e.ele,{autoAlpha:1});this._curScene=this._getScene(e),gsap.set(this._curScene.ele,{zIndex:2,y:0}),gsap.to(this._curScene.ele,{duration:.5}),this._curScene.evt.startScene()}restartCurScene(){this._sceneCollection[0].evt.startScene()}setDefTrans(e){this._transID=this._setTransition(e)}gotoScene(e,t=""){let s=this._getScene(e);if(s.name===this._curScene.name)return 0;Object.keys(s).length>0&&(this._transition(this._curScene,s,t),this._curScene=s)}goNext(e=""){let t=this._getNextScene();Object.keys(t).length>0&&(this._transition(this._curScene,t,e),this._curScene=t)}goPrev(e=""){let t=this._getPrevScene();Object.keys(t).length>0&&(this._transition(this._curScene,t,e),this._curScene=t)}_getNextScene(){let e=this._curScene.id+1,t=this._sceneCollection[e];for(;!t;)if(e++,this._sceneCollection.length<e)return{};return t}_getPrevScene(){let e=this._curScene.id-1,t=this._sceneCollection[e];for(;!t;)if(1>--e)return{};return t}_getScene(e){if("string"==typeof e){for(let t of this._sceneCollection)if(t&&t.name===e)return t}else for(let t of this._sceneCollection)if(t.id===e)return t;return{}}_setTransition(e){let t=0;switch(e){case"wipe-left":t=1;break;case"wipe-right":t=2;break;case"wipe-down":t=3;break;case"wipe-top-left":t=4;break;default:t=0}return t}_getTransition(e){let t={opacity:0};switch(e){case 1:t={clip:`rect(0px,${this._w}px,${this._h}px,${this._w}px)`};break;case 2:t={clip:`rect(0px,0px,${this._h}px,0px)`};break;case 3:t={clip:`rect(0px,${this._w}px,0px,0px)`};break;case 4:case 4:t={clip:"rect(0px,0px,0px,0px)"}}return t}_transition(e,t,s){e.evt.endScene&&e.evt.endScene(),t.evt.endScene&&t.evt.startScene();for(let e of this._sceneCollection)e&&(gsap.set(e.ele,{zIndex:1}),console.log(e));gsap.set(e.ele,{zIndex:2}),gsap.set(t.ele,{zIndex:3});let n=0;n=""===s?this._transID:this._setTransition(s);let i=this._getTransition(n);gsap.from(t.ele,.5,i)}}var $sceneMgr=new sceneMgr;